{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "MoveDirection",
    "cc",
    "Enum",
    "NONE",
    "UP",
    "DOWN",
    "LEFT",
    "RIGHT",
    "minTilesCount",
    "mapMoveStep",
    "minMoveValue",
    "Class",
    "extends",
    "Component",
    "properties",
    "_touchStartPos",
    "default",
    "serializable",
    "_touching",
    "floorLayerName",
    "barrierLayerName",
    "objectGroupName",
    "startObjectName",
    "successObjectName",
    "onLoad",
    "self",
    "_player",
    "node",
    "getChildByName",
    "_isMapLoaded",
    "active",
    "eventManager",
    "addListener",
    "event",
    "EventListener",
    "KEYBOARD",
    "onKeyPressed",
    "keyCode",
    "_onKeyPressed",
    "restart",
    "_succeedLayer",
    "_initMapPosition",
    "_curTile",
    "_startTile",
    "_updatePlayerPos",
    "start",
    "err",
    "log",
    "getParent",
    "_tiledMap",
    "getComponent",
    "TiledMap",
    "objectGroup",
    "getObjectGroup",
    "startObj",
    "getObject",
    "endObj",
    "startPos",
    "p",
    "sgNode",
    "x",
    "y",
    "endPos",
    "_layerFloor",
    "getLayer",
    "_layerBarrier",
    "_getTilePos",
    "_endTile",
    "setPosition",
    "visibleRect",
    "bottomLeft",
    "pos",
    "getPositionAt",
    "posInPixel",
    "mapSize",
    "getContentSize",
    "tileSize",
    "getTileSize",
    "Math",
    "floor",
    "width",
    "height",
    "newTile",
    "mapMoveDir",
    "KEY",
    "up",
    "down",
    "left",
    "right",
    "_tryMoveToNewTile",
    "getMapSize",
    "getTileGIDAt",
    "_tryMoveMap",
    "pointEqualToPoint",
    "moveDir",
    "mapContentSize",
    "mapPos",
    "getPosition",
    "playerPos",
    "viewSize",
    "size",
    "minDisX",
    "minDisY",
    "disX",
    "disY",
    "newPos",
    "minX",
    "maxX",
    "minY",
    "bottom",
    "maxY"
  ],
  "mappings": ";;AAAA,IAAIA,gBAAgBC,GAAGC,IAAH,CAAQ;AACxBC,UAAM,CADkB;AAExBC,QAAI,CAFoB;AAGxBC,UAAM,CAHkB;AAIxBC,UAAM,CAJkB;AAKxBC,WAAO;AALiB,CAAR,CAApB;;AAQA,IAAIC,gBAAgB,CAApB;AACA,IAAIC,cAAc,CAAlB;AACA,IAAIC,eAAe,EAAnB;;AAEAT,GAAGU,KAAH,CAAS;AACLC,aAASX,GAAGY,SADP;;AAGLC,gBAAY;AACRC,wBAAgB;AACZC,qBAAS,IADG;AAEZC,0BAAc;AAFF,SADR;AAKRC,mBAAW;AACPF,qBAAS,KADF;AAEPC,0BAAc;AAFP,SALH;;AAURE,wBAAgB,OAVR;AAWRC,0BAAkB,SAXV;AAYRC,yBAAiB,SAZT;AAaRC,yBAAiB,YAbT;AAcRC,2BAAmB;AAdX,KAHP;;AAoBL;AACAC,YAAQ,kBAAY;AAChB,YAAIC,OAAO,IAAX;AACAA,aAAKC,OAAL,GAAeD,KAAKE,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAf;AACA,YAAI,CAAEH,KAAKI,YAAX,EAAyB;AACrBJ,iBAAKC,OAAL,CAAaI,MAAb,GAAsB,KAAtB;AACH;;AAED;AACA7B,WAAG8B,YAAH,CAAgBC,WAAhB,CAA4B;AACxBC,mBAAOhC,GAAGiC,aAAH,CAAiBC,QADA;AAExBC,0BAAc,sBAASC,OAAT,EAAkBJ,KAAlB,EAAyB;AACnCR,qBAAKa,aAAL,CAAmBD,OAAnB,EAA4BJ,KAA5B;AACH;AAJuB,SAA5B,EAKGR,KAAKE,IALR;AASH,KAtCI;;AAwCLY,aAAS,mBAAW;AAChB,aAAKC,aAAL,CAAmBV,MAAnB,GAA4B,KAA5B;AACA,aAAKW,gBAAL;AACA,aAAKC,QAAL,GAAgB,KAAKC,UAArB;AACA,aAAKC,gBAAL;AACH,KA7CI;;AA+CLC,WAAO,eAASC,GAAT,EAAc;AACjB7C,WAAG8C,GAAH,CAAO,gBAAP,EAAyBD,GAAzB;AACA,YAAIA,GAAJ,EAAS;AAAE;AAAS;;AAEpB,YAAIrB,OAAO,IAAX;;AAEA;AACAA,aAAKgB,gBAAL;;AAEA;AACA,aAAKD,aAAL,GAAqB,KAAKb,IAAL,CAAUqB,SAAV,GAAsBpB,cAAtB,CAAqC,gBAArC,CAArB;AACA,aAAKY,aAAL,CAAmBV,MAAnB,GAA4B,KAA5B;;AAEA;AACAL,aAAKwB,SAAL,GAAiBxB,KAAKE,IAAL,CAAUuB,YAAV,CAAuBjD,GAAGkD,QAA1B,CAAjB;AACAlD,WAAG8C,GAAH,CAAOtB,KAAKwB,SAAZ;AACA,YAAIG,cAAc3B,KAAKwB,SAAL,CAAeI,cAAf,CAA8B5B,KAAKJ,eAAnC,CAAlB;AACApB,WAAG8C,GAAH,CAAOK,WAAP;AACA,YAAI,CAACA,WAAL,EAAkB;;AAElB;AACA,YAAIE,WAAWF,YAAYG,SAAZ,CAAsB,KAAKjC,eAA3B,CAAf;AACA,YAAIkC,SAASJ,YAAYG,SAAZ,CAAsB,KAAKhC,iBAA3B,CAAb;AACA,YAAI,CAAC+B,QAAD,IAAa,CAACE,MAAlB,EAA0B;;AAE1B;AACA,YAAIC,WAAWxD,GAAGyD,CAAH,CAAKJ,SAASK,MAAT,CAAgBC,CAArB,EAAwBN,SAASK,MAAT,CAAgBE,CAAxC,CAAf;AACA,YAAIC,SAAS7D,GAAGyD,CAAH,CAAKF,OAAOG,MAAP,CAAcC,CAAnB,EAAsBJ,OAAOG,MAAP,CAAcE,CAApC,CAAb;;AAEA;AACA,aAAKE,WAAL,GAAmB,KAAKd,SAAL,CAAee,QAAf,CAAwB,KAAK7C,cAA7B,CAAnB;AACA,aAAK8C,aAAL,GAAqB,KAAKhB,SAAL,CAAee,QAAf,CAAwB,KAAK5C,gBAA7B,CAArB;AACA,YAAI,CAAC,KAAK2C,WAAN,IAAqB,CAAC,KAAKE,aAA/B,EAA8C;;AAE9C,aAAKvB,QAAL,GAAgB,KAAKC,UAAL,GAAkB,KAAKuB,WAAL,CAAiBT,QAAjB,CAAlC;AACA,aAAKU,QAAL,GAAgB,KAAKD,WAAL,CAAiBJ,MAAjB,CAAhB;AACA,YAAI,KAAKpC,OAAT,EAAkB;AACd,iBAAKkB,gBAAL;AACA,iBAAKlB,OAAL,CAAaI,MAAb,GAAsB,IAAtB;AACH;;AAED,aAAKD,YAAL,GAAoB,IAApB;AACH,KAzFI;;AA2FLY,sBAAkB,4BAAW;AACzB,aAAKd,IAAL,CAAUyC,WAAV,CAAsBnE,GAAGoE,WAAH,CAAeC,UAArC;AACH,KA7FI;;AA+FL1B,sBAAkB,4BAAW;AACzB3C,WAAG8C,GAAH,CAAO,KAAKL,QAAZ,EAAsB,KAAKA,QAAL,CAAckB,CAApC,EAAuC,KAAKlB,QAAL,CAAcmB,CAArD;AACA,YAAIU,MAAM,KAAKR,WAAL,CAAiBS,aAAjB,CAA+B,KAAK9B,QAApC,CAAV;AACA,aAAKhB,OAAL,CAAa0C,WAAb,CAAyBG,GAAzB;AACH,KAnGI;;AAqGLL,iBAAa,qBAASO,UAAT,EAAqB;AAC9B,YAAIC,UAAU,KAAK/C,IAAL,CAAUgD,cAAV,EAAd;AACA,YAAIC,WAAW,KAAK3B,SAAL,CAAe4B,WAAf,EAAf;AACA,YAAIjB,IAAIkB,KAAKC,KAAL,CAAWN,WAAWb,CAAX,GAAegB,SAASI,KAAnC,CAAR;AACA,YAAInB,IAAIiB,KAAKC,KAAL,CAAW,CAACL,QAAQO,MAAR,GAAiBR,WAAWZ,CAA7B,IAAkCe,SAASK,MAAtD,CAAR;;AAEA,eAAOhF,GAAGyD,CAAH,CAAKE,CAAL,EAAQC,CAAR,CAAP;AACH,KA5GI;;AA8GLvB,mBAAe,uBAASD,OAAT,EAAkBJ,KAAlB,EAAyB;AACpC,YAAI,CAAC,KAAKJ,YAAN,IAAsB,KAAKW,aAAL,CAAmBV,MAA7C,EAAqD;AAAE;AAAS;;AAEhE,YAAIoD,UAAUjF,GAAGyD,CAAH,CAAK,KAAKhB,QAAL,CAAckB,CAAnB,EAAsB,KAAKlB,QAAL,CAAcmB,CAApC,CAAd;AACA,YAAIsB,aAAanF,cAAcG,IAA/B;AACA,gBAAOkC,OAAP;AACI,iBAAKpC,GAAGmF,GAAH,CAAOC,EAAZ;AACIH,wBAAQrB,CAAR,IAAa,CAAb;AACAsB,6BAAanF,cAAcK,IAA3B;AACA;AACJ,iBAAKJ,GAAGmF,GAAH,CAAOE,IAAZ;AACIJ,wBAAQrB,CAAR,IAAa,CAAb;AACAsB,6BAAanF,cAAcI,EAA3B;AACA;AACJ,iBAAKH,GAAGmF,GAAH,CAAOG,IAAZ;AACIL,wBAAQtB,CAAR,IAAa,CAAb;AACAuB,6BAAanF,cAAcO,KAA3B;AACA;AACJ,iBAAKN,GAAGmF,GAAH,CAAOI,KAAZ;AACIN,wBAAQtB,CAAR,IAAa,CAAb;AACAuB,6BAAanF,cAAcM,IAA3B;AACA;AACJ;AACI;AAlBR;;AAqBA,aAAKmF,iBAAL,CAAuBP,OAAvB,EAAgCC,UAAhC;AACH,KAzII;;AA2ILM,uBAAmB,2BAASP,OAAT,EAAkBC,UAAlB,EAA8B;AAC7C,YAAIT,UAAU,KAAKzB,SAAL,CAAeyC,UAAf,EAAd;AACA,YAAIR,QAAQtB,CAAR,GAAY,CAAZ,IAAiBsB,QAAQtB,CAAR,IAAac,QAAQM,KAA1C,EAAiD;AACjD,YAAIE,QAAQrB,CAAR,GAAY,CAAZ,IAAiBqB,QAAQrB,CAAR,IAAaa,QAAQO,MAA1C,EAAkD;;AAElD;AACA,YAAI,KAAKhB,aAAL,CAAmB0B,YAAnB,CAAgCT,OAAhC,CAAJ,EAA8C;AAC1CjF,eAAG8C,GAAH,CAAO,sBAAP;AACA,mBAAO,KAAP;AACH;;AAED;AACA,aAAKL,QAAL,GAAgBwC,OAAhB;AACA,aAAKtC,gBAAL;;AAEA;AACA,aAAKgD,WAAL,CAAiBT,UAAjB;;AAEA;AACA,YAAIlF,GAAG4F,iBAAH,CAAqB,KAAKnD,QAA1B,EAAoC,KAAKyB,QAAzC,CAAJ,EAAwD;AACpDlE,eAAG8C,GAAH,CAAO,SAAP;AACA,iBAAKP,aAAL,CAAmBV,MAAnB,GAA4B,IAA5B;AACH;AACJ,KAlKI;;AAoKL8D,iBAAa,qBAASE,OAAT,EAAkB;AAC3B;AACA,YAAIC,iBAAiB,KAAKpE,IAAL,CAAUgD,cAAV,EAArB;AACA,YAAIqB,SAAS,KAAKrE,IAAL,CAAUsE,WAAV,EAAb;AACA,YAAIC,YAAY,KAAKxE,OAAL,CAAauE,WAAb,EAAhB;AACA,YAAIE,WAAWlG,GAAGmG,IAAH,CAAQnG,GAAGoE,WAAH,CAAeW,KAAvB,EAA8B/E,GAAGoE,WAAH,CAAeY,MAA7C,CAAf;AACA,YAAIL,WAAW,KAAK3B,SAAL,CAAe4B,WAAf,EAAf;AACA,YAAIwB,UAAU7F,gBAAgBoE,SAASI,KAAvC;AACA,YAAIsB,UAAU9F,gBAAgBoE,SAASK,MAAvC;;AAEA,YAAIsB,OAAOL,UAAUtC,CAAV,GAAcoC,OAAOpC,CAAhC;AACA,YAAI4C,OAAON,UAAUrC,CAAV,GAAcmC,OAAOnC,CAAhC;AACA,YAAI4C,MAAJ;AACA,gBAAQX,OAAR;AACI,iBAAK9F,cAAcI,EAAnB;AACI,oBAAIoG,OAAOF,OAAX,EAAoB;AAChBG,6BAASxG,GAAGyD,CAAH,CAAKsC,OAAOpC,CAAZ,EAAeoC,OAAOnC,CAAP,GAAWe,SAASK,MAAT,GAAkBxE,WAA5C,CAAT;AACH;AACD;AACJ,iBAAKT,cAAcK,IAAnB;AACI,oBAAI8F,SAASlB,MAAT,GAAkBuB,IAAlB,GAAyB5B,SAASK,MAAlC,GAA2CqB,OAA/C,EAAwD;AACpDG,6BAASxG,GAAGyD,CAAH,CAAKsC,OAAOpC,CAAZ,EAAeoC,OAAOnC,CAAP,GAAWe,SAASK,MAAT,GAAkBxE,WAA5C,CAAT;AACH;AACD;AACJ,iBAAKT,cAAcM,IAAnB;AACI,oBAAI6F,SAASnB,KAAT,GAAiBuB,IAAjB,GAAwB3B,SAASI,KAAjC,GAAyCqB,OAA7C,EAAsD;AAClDI,6BAASxG,GAAGyD,CAAH,CAAKsC,OAAOpC,CAAP,GAAWgB,SAASI,KAAT,GAAiBvE,WAAjC,EAA8CuF,OAAOnC,CAArD,CAAT;AACH;AACD;AACJ,iBAAK7D,cAAcO,KAAnB;AACI,oBAAIgG,OAAOF,OAAX,EAAoB;AAChBI,6BAASxG,GAAGyD,CAAH,CAAKsC,OAAOpC,CAAP,GAAWgB,SAASI,KAAT,GAAiBvE,WAAjC,EAA8CuF,OAAOnC,CAArD,CAAT;AACH;AACD;AACJ;AACI;AAtBR;;AAyBA,YAAI4C,MAAJ,EAAY;AACR;AACA,gBAAIC,OAAOP,SAASnB,KAAT,GAAiBe,eAAef,KAAhC,GAAwC/E,GAAGoE,WAAH,CAAekB,IAAlE;AACA,gBAAIoB,OAAO1G,GAAGoE,WAAH,CAAekB,IAAf,CAAoB3B,CAA/B;AACA,gBAAIgD,OAAOT,SAASlB,MAAT,GAAkBc,eAAed,MAAjC,GAA0ChF,GAAGoE,WAAH,CAAewC,MAApE;AACA,gBAAIC,OAAO7G,GAAGoE,WAAH,CAAewC,MAAf,CAAsBhD,CAAjC;;AAEA,gBAAI4C,OAAO7C,CAAP,GAAW8C,IAAf,EAAqBD,OAAO7C,CAAP,GAAW8C,IAAX;AACrB,gBAAID,OAAO7C,CAAP,GAAW+C,IAAf,EAAqBF,OAAO7C,CAAP,GAAW+C,IAAX;AACrB,gBAAIF,OAAO5C,CAAP,GAAW+C,IAAf,EAAqBH,OAAO5C,CAAP,GAAW+C,IAAX;AACrB,gBAAIH,OAAO5C,CAAP,GAAWiD,IAAf,EAAqBL,OAAO5C,CAAP,GAAWiD,IAAX;;AAErB,gBAAI,CAAC7G,GAAG4F,iBAAH,CAAqBY,MAArB,EAA6BT,MAA7B,CAAL,EAA2C;AACvC/F,mBAAG8C,GAAH,CAAO,gCAAP,EAAyC0D,MAAzC;AACA,qBAAK9E,IAAL,CAAUyC,WAAV,CAAsBqC,MAAtB;AACH;AACJ;AACJ;AA3NI,CAAT",
  "file": "unknown",
  "sourcesContent": [
    "var MoveDirection = cc.Enum({\n    NONE: 0,\n    UP: 1,\n    DOWN: 2, \n    LEFT: 3,\n    RIGHT: 4\n});\n\nvar minTilesCount = 2;\nvar mapMoveStep = 1;\nvar minMoveValue = 50;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _touchStartPos: {\n            default: null,\n            serializable: false,\n        },\n        _touching: {\n            default: false,\n            serializable: false,\n        },\n\n        floorLayerName: 'floor',\n        barrierLayerName: 'barrier',\n        objectGroupName: 'players',\n        startObjectName: 'SpawnPoint',\n        successObjectName: 'SuccessPoint'\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var self = this;\n        self._player = self.node.getChildByName('player');\n        if (! self._isMapLoaded) {\n            self._player.active = false;\n        }\n\n        // Add keyboard event.\n        cc.eventManager.addListener({\n            event: cc.EventListener.KEYBOARD,\n            onKeyPressed: function(keyCode, event) {\n                self._onKeyPressed(keyCode, event);\n            }\n        }, self.node);\n\n\n    \n    },\n\n    restart: function() {\n        this._succeedLayer.active = false;\n        this._initMapPosition();\n        this._curTile = this._startTile;\n        this._updatePlayerPos();\n    },\n\n    start: function(err) {\n        cc.log('Game start ...', err);\n        if (err) { return; }\n\n        var self = this;\n\n        // Init the map position\n        self._initMapPosition();\n        \n        // Init the succeed layer\n        this._succeedLayer = this.node.getParent().getChildByName('successedLayer');\n        this._succeedLayer.active = false;\n        \n        // Init the player position\n        self._tiledMap = self.node.getComponent(cc.TiledMap);\n        cc.log(self._tiledMap);\n        var objectGroup = self._tiledMap.getObjectGroup(self.objectGroupName);\n        cc.log(objectGroup);\n        if (!objectGroup) return;\n\n        // Load start object and end object from tited map.\n        var startObj = objectGroup.getObject(this.startObjectName);\n        var endObj = objectGroup.getObject(this.successObjectName);\n        if (!startObj || !endObj) return;\n\n        // Get start position and end position.\n        var startPos = cc.p(startObj.sgNode.x, startObj.sgNode.y);\n        var endPos = cc.p(endObj.sgNode.x, endObj.sgNode.y);\n\n        // Get floor and barrier.\n        this._layerFloor = this._tiledMap.getLayer(this.floorLayerName);\n        this._layerBarrier = this._tiledMap.getLayer(this.barrierLayerName);\n        if (!this._layerFloor || !this._layerBarrier) return;\n\n        this._curTile = this._startTile = this._getTilePos(startPos);\n        this._endTile = this._getTilePos(endPos);\n        if (this._player) {\n            this._updatePlayerPos();\n            this._player.active = true;\n        }\n\n        this._isMapLoaded = true;\n    },\n\n    _initMapPosition: function() {\n        this.node.setPosition(cc.visibleRect.bottomLeft);\n    },\n\n    _updatePlayerPos: function() {\n        cc.log(this._curTile, this._curTile.x, this._curTile.y);\n        var pos = this._layerFloor.getPositionAt(this._curTile);\n        this._player.setPosition(pos);\n    },\n\n    _getTilePos: function(posInPixel) {\n        var mapSize = this.node.getContentSize();\n        var tileSize = this._tiledMap.getTileSize();\n        var x = Math.floor(posInPixel.x / tileSize.width);\n        var y = Math.floor((mapSize.height - posInPixel.y) / tileSize.height);\n\n        return cc.p(x, y);\n    },\n\n    _onKeyPressed: function(keyCode, event) {\n        if (!this._isMapLoaded || this._succeedLayer.active) { return; }\n\n        var newTile = cc.p(this._curTile.x, this._curTile.y);\n        var mapMoveDir = MoveDirection.NONE;\n        switch(keyCode) {\n            case cc.KEY.up:\n                newTile.y -= 1;\n                mapMoveDir = MoveDirection.DOWN;\n                break;\n            case cc.KEY.down:\n                newTile.y += 1;\n                mapMoveDir = MoveDirection.UP;\n                break;\n            case cc.KEY.left:\n                newTile.x -= 1;\n                mapMoveDir = MoveDirection.RIGHT;\n                break;\n            case cc.KEY.right:\n                newTile.x += 1;\n                mapMoveDir = MoveDirection.LEFT;\n                break;\n            default:\n                return;\n        }\n\n        this._tryMoveToNewTile(newTile, mapMoveDir);\n    },\n\n    _tryMoveToNewTile: function(newTile, mapMoveDir) {\n        var mapSize = this._tiledMap.getMapSize();\n        if (newTile.x < 0 || newTile.x >= mapSize.width) return;\n        if (newTile.y < 0 || newTile.y >= mapSize.height) return;\n\n        // If the newTile position in barrier layer of tited map, don't move.\n        if (this._layerBarrier.getTileGIDAt(newTile)) {\n            cc.log('This way is blocked!');\n            return false;\n        }\n\n        // update the player position\n        this._curTile = newTile;\n        this._updatePlayerPos();\n\n        // move the map if necessary\n        this._tryMoveMap(mapMoveDir);\n\n        // check the player is success or not\n        if (cc.pointEqualToPoint(this._curTile, this._endTile)) {\n            cc.log('succeed');\n            this._succeedLayer.active = true;\n        }\n    },\n\n    _tryMoveMap: function(moveDir) {\n        // get necessary data\n        var mapContentSize = this.node.getContentSize();\n        var mapPos = this.node.getPosition();\n        var playerPos = this._player.getPosition();\n        var viewSize = cc.size(cc.visibleRect.width, cc.visibleRect.height);\n        var tileSize = this._tiledMap.getTileSize();\n        var minDisX = minTilesCount * tileSize.width;\n        var minDisY = minTilesCount * tileSize.height;\n\n        var disX = playerPos.x + mapPos.x;\n        var disY = playerPos.y + mapPos.y;\n        var newPos;\n        switch (moveDir) {\n            case MoveDirection.UP:\n                if (disY < minDisY) {\n                    newPos = cc.p(mapPos.x, mapPos.y + tileSize.height * mapMoveStep);\n                }\n                break;\n            case MoveDirection.DOWN:\n                if (viewSize.height - disY - tileSize.height < minDisY) {\n                    newPos = cc.p(mapPos.x, mapPos.y - tileSize.height * mapMoveStep);\n                }\n                break;\n            case MoveDirection.LEFT:\n                if (viewSize.width - disX - tileSize.width < minDisX) {\n                    newPos = cc.p(mapPos.x - tileSize.width * mapMoveStep, mapPos.y);\n                }\n                break;\n            case MoveDirection.RIGHT:\n                if (disX < minDisX) {\n                    newPos = cc.p(mapPos.x + tileSize.width * mapMoveStep, mapPos.y);\n                }\n                break;\n            default:\n                return;\n        }\n\n        if (newPos) {\n            // calculate the position range of map\n            var minX = viewSize.width - mapContentSize.width - cc.visibleRect.left;\n            var maxX = cc.visibleRect.left.x;\n            var minY = viewSize.height - mapContentSize.height - cc.visibleRect.bottom;\n            var maxY = cc.visibleRect.bottom.y;\n\n            if (newPos.x < minX) newPos.x = minX;\n            if (newPos.x > maxX) newPos.x = maxX;\n            if (newPos.y < minY) newPos.y = minY;\n            if (newPos.y > maxY) newPos.y = maxY;\n\n            if (!cc.pointEqualToPoint(newPos, mapPos)) {\n                cc.log('Move the map to new position: ', newPos);\n                this.node.setPosition(newPos);\n            }\n        }\n    }\n});\n"
  ]
}